(this["webpackJsonprekrutacja-twoj-psycholog"]=this["webpackJsonprekrutacja-twoj-psycholog"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(0),s=n.n(i),c=n(7),r=n.n(c),l=(n(32),n(17)),o=n(18),d=n(23),h=n(22),p=(n(33),n(53)),u=n(11),j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isSideBarVisible:!1,isModalOpen:!1,selectedTherapistId:0,fullName:"",aboutMe:"",isEditSideBarOpen:!1,pageIndex:0,pagination:{pageCount:36,startIndex:0,endIndex:10}},e.handleInitialState=function(){e.setState({pagination:{pageCount:Math.ceil(e.props.therapists.length/10)}})},e.handleClick=function(t){e.setState({isSideBarVisible:!0,selectedTherapistId:t}),e.props.fetchTherapistDetails(t)},e.closeSideBar=function(){e.setState({isSideBarVisible:!1,isEditSideBarOpen:!1})},e.handleSwitchPage=function(t,n){e.setState({pagination:{pageCount:e.state.pagination.pageCount,startIndex:10*n,endIndex:10*n+10}})},e.handleOpenEditModal=function(){e.setState({isEditSideBarOpen:!0})},e.handleOpenRemoveModal=function(){e.setState({isModalOpen:!0,isSideBarVisible:!1})},e.handleCloseRemoveModal=function(){e.setState({isModalOpen:!1})},e.handleCloseEditModal=function(){e.setState({isEditSideBarOpen:!1})},e.handleRemoveTherapist=function(t){e.props.removeTherapist(t),e.setState({isModalOpen:!1})},e.handleEditTherapist=function(t,n,a){e.props.editTherapist(t,n,a),e.setState({isEditSideBarOpen:!1})},e.setUserFullName=function(t){e.setState({fullName:t})},e.setUserAboutMe=function(t){e.setState({aboutMe:t})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchTherapists(),this.props.therapists&&(console.log("halko"),this.handleInitialState())}},{key:"render",value:function(){var e=this,t=this.state,n=t.isSideBarVisible,i=t.pagination,s=t.selectedTherapistId,c=t.isEditSideBarOpen,r=t.aboutMe,l=t.fullName,o=this.props,d=o.therapists,h=o.therapistDetails;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{children:[n?Object(a.jsxs)("div",{className:"bcg",children:[" ",Object(a.jsxs)("div",{className:"sideBar",children:[Object(a.jsx)("span",{onClick:function(){return e.closeSideBar()},className:"x",children:"x"}),c?Object(a.jsxs)("div",{className:"editSideBarWrapper",children:[Object(a.jsx)("h1",{children:"Edytuj informacje o specjali\u015bcie"}),Object(a.jsx)("h3",{children:"Imi\u0119 i nazwisko"}),Object(a.jsx)("input",{type:"text",onChange:function(t){return e.setUserFullName(t.target.value)}}),Object(a.jsx)("h3",{children:"O mnie"}),Object(a.jsx)("textarea",{onChange:function(t){return e.setUserAboutMe(t.target.value)}}),Object(a.jsxs)("div",{className:"buttonsWrapper",children:[Object(a.jsx)("button",{className:"cancel",onClick:function(){return e.handleCloseEditModal()},children:"Anuluj"}),Object(a.jsx)("button",{className:"save",onClick:function(){return e.handleEditTherapist(l,r,s)},children:"Zapisz"})]})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Informacja o specjali\u015bcie"}),Object(a.jsx)("h3",{children:"Imi\u0119 i nazwisko"}),h&&h.fullName&&""!==h.fullName?Object(a.jsx)("p",{children:h.fullName}):Object(a.jsx)("p",{children:"Brak danych"}),Object(a.jsx)("h3",{children:"Specjalizacje"}),h&&h.specializations&&0!==h.specializations.length?Object(a.jsx)("p",{children:h.specializations.join(", ")}):Object(a.jsx)("p",{children:"Brak danych"}),Object(a.jsx)("h3",{children:"Rodzaje terapii"}),h&&h.therapyTypes&&0!==h.therapyTypes.length?Object(a.jsx)("p",{children:h.therapyTypes.join(", ")}):Object(a.jsx)("p",{children:"Brak danych"}),Object(a.jsx)("h3",{children:"Certyfikaty"}),h&&h.certificates&&0!==h.certificates.length?h.certificates.map((function(e){return Object(a.jsx)("p",{children:Object(a.jsx)("li",{children:e.name})})})):Object(a.jsx)("p",{children:"Brak danych"}),Object(a.jsx)("h3",{children:"O mnie"}),h&&h.aboutMe&&""!==h.aboutMe?Object(a.jsx)("p",{children:r}):Object(a.jsx)("p",{children:"Brak danych"}),Object(a.jsx)("button",{className:"edit",onClick:function(){return e.handleOpenEditModal()},children:"Edytuj"}),Object(a.jsx)("button",{className:"remove",onClick:function(){return e.handleOpenRemoveModal()},children:"Usu\u0144"})]})]})]}):null,this.state.isModalOpen?Object(a.jsx)("div",{className:"removeModalBackground",children:Object(a.jsxs)("div",{className:"removeModal",children:[Object(a.jsx)("h1",{children:"Usun\u0105\u0107 specjalist\u0119?"}),Object(a.jsx)("p",{children:"Czy na pewno chcesz usun\u0105\u0107 tego specjalist\u0119? Tej akcji nie mo\u017cna cofn\u0105\u0107."}),Object(a.jsx)("button",{className:"cancel",onClick:function(){return e.handleCloseRemoveModal()},children:"Anuluj"}),Object(a.jsx)("button",{className:"remove",onClick:function(){return e.handleRemoveTherapist(s)},children:"Usu\u0144"})]})}):null,Object(a.jsxs)("div",{className:"listWrapper",children:[Object(a.jsxs)("div",{className:"specialistsWrapper",children:[Object(a.jsx)("h2",{children:"Specjalista"}),d&&null!==d?d.slice(this.state.pagination.startIndex,this.state.pagination.endIndex).map((function(t){return Object(a.jsxs)("div",{onClick:function(){return e.handleClick(t.therapistId)},className:"specialist",children:[Object(a.jsx)("img",{src:t.avatarUrl,alt:"avatar"}),Object(a.jsx)("li",{children:t.fullName})]})})):null]}),Object(a.jsxs)("div",{className:"specializationWrapper",children:[Object(a.jsx)("h2",{children:"Specjalizacje"}),d&&null!==d?d.slice(this.state.pagination.startIndex,this.state.pagination.endIndex).map((function(t){return Object(a.jsx)("ul",{onClick:function(){return e.handleClick(t.therapistId)},className:"speciallization",children:Object(a.jsxs)("li",{children:[" ",t.specializations.length<=3?null:Object(a.jsxs)("div",{className:"specInfo",children:[Object(a.jsx)("div",{className:"arrowSquare"}),t.specializations.join(", ")]}),t.specializations.length<=3?t.specializations.join(", "):t.specializations.splice(0,3).join(", ")+"..."]})})})):null]})]}),Object(a.jsx)("div",{className:"paginationWrapper",children:Object(a.jsx)(p.a,{count:i.pageCount,page:this.state.pageIndex,onChange:function(t,n){e.handleSwitchPage(t,n)},variant:"outlined",shape:"rounded"})})]})})}}]),n}(i.Component),b=Object(u.b)((function(e){return{therapists:e.main.therapists,therapistDetails:e.main.therapistDetails}}),(function(e){return{fetchTherapists:function(){return e((function(e){fetch("https://twojpsycholog.pl/lb-proxy/api-market/open/therapists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({citySeoName:"ONLINE"})}).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_THERAPISTS",data:t.therapists})})).catch((function(e){console.error("Error:",e)}))}))},fetchTherapistDetails:function(t){return e(function(e){return function(t){fetch("https://twojpsycholog.pl/lb-proxy/api-market/open/therapists/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t({type:"FETCH_THERAPIST_DETAILS",data:e})})).catch((function(e){console.error("Error:",e)}))}}(t))},removeTherapist:function(t){return e(function(e){return function(t){return t({type:"REMOVE_THERAPIST",data:e})}}(t))},editTherapist:function(t,n,a){return e(function(e,t,n){console.log(e,t,n);var a={fullName:e,aboutMe:t,id:n};return function(e){return e({type:"EDIT_THERAPIST",data:a})}}(t,n,a))}}}))(j);var O=function(){return Object(a.jsx)(b,{})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),s(e),c(e)}))},x=n(8),m=n(20),g=n(21),S=n(15),v=n(6),T={therapists:null,therapistDetails:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"FETCH_THERAPISTS":n=Object(v.a)(Object(v.a)({},e),{},{therapists:t.data});break;case"FETCH_THERAPIST_DETAILS":n=Object(v.a)(Object(v.a)({},e),{},{therapistDetails:t.data});break;case"EDIT_THERAPIST":var a=t.data,i=a.fullName,s=a.aboutMe,c=a.id,r=e.therapists.findIndex((function(e){return e.therapistId===c})),l=Object(S.a)(e.therapists),o=e.therapists[r];o.aboutMe=s,o.fullName=i,l[r]=o,n=Object(v.a)(Object(v.a)({},e),{},{newList:l});break;case"REMOVE_THERAPIST":var d=e.therapists.findIndex((function(e){return e.therapistId===t.data}));function h(){if(-1!==d){var t=Object(S.a)(e.therapists);return t.splice(d,1),t}return e.newTherapistList}var p=h();n=Object(v.a)(Object(v.a)({},e),{},{therapists:p});break;default:return e}return n},I=Object(x.c)({main:E}),y=Object(g.createLogger)(),N=[m.a];N.push(y);var C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||x.d,k=Object(x.e)(I,C(x.a.apply(void 0,N)));r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(u.a,{store:k,children:Object(a.jsx)(O,{})})}),document.getElementById("root")),f()}},[[38,1,2]]]);
//# sourceMappingURL=main.bca395a7.chunk.js.map